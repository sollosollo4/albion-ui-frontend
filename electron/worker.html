<!DOCTYPE html>
<html>
<header>
    <title>WORKER</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</header>
<body>
</body>
<script>
    const electron = require('electron');
    const ipcRenderer = electron.ipcRenderer;

    var turn, roomId, AuthToken;
    ipcRenderer.on('worker', function (event, data) {
        roomId = data.roomId;
        AuthToken = data.auth;
        ipcRenderer.send('set-auth', {
            roomId: roomId,
            authToken: AuthToken
        })
    });

    function handleBuffer(event, buffers) {
        axios.post(`https://albion-overlay.ru/api/rooms/${roomId}/sendPressButtonEvent`, {
            buffers: buffers
        }, {
            withCredentials: true,
            headers: {
                'Authorization': `Bearer ${AuthToken}`,
                'Content-Type': 'application/json',
            },
        })
        .then(response => {
            
        })
        .catch(error => {
            });
    }
</script>

</html>